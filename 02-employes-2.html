<!-- Démarrage SQL : repos sur OS (C:) -->

<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">

    <title>Cours SQL - Requêtes - 02</title>

    <link rel="stylesheet" href="css/styles.css">
</head>

<body>

    <!-- HEADER -->
    <header class="container-fluid p-4">
        <div class="row">
            <div class="col-12 text-center">
                <h1 class="display-4 text-dark">Cours SQL - Requêtes - 2</h1>
                <p class="lead">INSERT, UPDATE et DELETE</p>
            </div>
        </div>
        <!-- fin row  -->
    </header>

    <!-- debut div de la row caroussel -->
    <div class="d-flex mb-4 mt-4 p-4 justify-content-center">
        <!-- debut row -->
        <div class="row col-6">
            <div id="carouselExampleSlidesOnly" class="carousel slide" data-bs-ride="carousel" data-interval="2500">
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img src="img/sql.jpg" class="d-block w-100" alt="logo sql">
                    </div>

                    <div class="carousel-item">
                        <img src="img/php.jpg" class="d-block w-100" alt="logo php">
                    </div>

                    <div class="carousel-item">
                        <img src="img/pma.jpg" class="d-block w-100" alt="logo pma">
                    </div>
                </div>
            </div>
        </div>
        <!-- fin row -->
    </div>
    <!-- fin div caroussel -->

    <!-- MAIN -->
    <main class="row container-fluid mx-auto p-2 bg-light">

        <!-- aside gauche avec nav sommaire -->
        <div class="col-3 p-4">

            <!-- NAV pour la page index : sommaire -->
            <nav id="navbar-example3" class="navbar navbar-light flex-column align-items-stretch p-3">
                <a class="navbar-brand" href="#index">Page Index - Sommaire</a>
                <nav class="nav nav-pills flex-column">
                    <a class="nav-link" href="#introduction">1. Introduction</a>
                    <a class="nav-link" href="#modelisation">2. Modélisation</a>
                    <a class="nav-link" href="#tables">3. Les tables </a>
                    <a class="nav-link" href="#les_colonnes">4. Les colonnes ou les champs </a>
                    <a class="nav-link" href="#les_types_de_donnees">5. Les types de données</a>
                    <a class="nav-link" href="#pk_ai_id">6. Types de données PK AI pour ID</a>
                    <a class="nav-link" href="#les_cardinalites">7. Les cardinalités</a>
                    <a class="nav-link" href="#table de jointure">8.Table de jointure</a>
                    <a class="nav-link" href="#clefs_etrangères">9. Clefs étrangères ou FK</a>
                    <a class="nav-link" href="#les_enregistrements">10. Les enrégistrements</a>
                    <a class="nav-link" href="#interroger_la_bdd">11. Intérroger la BDD </a>
                </nav>

                <!-- nav pour la page 01_requêtes -->
                <a class="navbar-brand" href="#">Page 01 - Requêtes</a>
                <nav class="nav nav-pills flex-column">
                    <a class="nav-link" href="#introduction">1. Base d'une BDD</a>
                    <a class="nav-link" href="#modelisation">2. Création d'une table</a>
                    <a class="nav-link" href="#tables">3. SELECT et DISTINCT</a>
                    <a class="nav-link" href="#les_colonnes">4. Les conditions</a>
                    <a class="nav-link" href="#les_types_de_donnees">5. Les opérateurs de comparaison</a>
                    <a class="nav-link" href="#pk_ai_id">6. ORDER BY</a>
                    <a class="nav-link" href="#les_cardinalites">7. Limitation avec LIMIT</a>
                    <a class="nav-link" href="#table de jointure">8. Faire des calculs</a>
                    <a class="nav-link" href="#clefs_etrangères">9. Les conditions multiples</a>
                    <a class="nav-link" href="#les_enregistrements"> Les regroupements</a>
                </nav>

                <!-- nav pour la page 02_requêtes -->
                <a class="navbar-brand" href="#">Page 02 - Requêtes</a>
                <nav class="nav nav-pills flex-column">
                    <a class="nav-link" href="#INSERT INTO, insertion">1. INSERT INTO, insertion</a>
                    <a class="nav-link" href="#modelisation">2. UPDATE, mise à jour</a>
                    <a class="nav-link" href="#tables">3. DELETE, effacer</a>
                    <a class="nav-link" href="#les_colonnes">4. Exo</a>
                </nav>

                <!-- nav pour la page 03_requêtes imbriquées -->
                <a class="navbar-brand" href="#">Page 03 - Requêtes imbriquées <br>
              BDD "bibliotheque"</a>
                <nav class="nav nav-pills flex-column">
                    <a class="nav-link" href="#">1. Modélisation </a>
                    <a class="nav-link" href="#">2. Création de la table</a>
                    <a class="nav-link" href="#">3. Insertion de contenu</a>
                    <a class="nav-link" href="#">4. Création clé-étrangère</a>
                    <a class="nav-link" href="#">4. Selectionner des tables(SELECT)</a>
                </nav>

                <!-- nav pour la page 04_jointures -->
                <a class="navbar-brand" href="#">Page 04 - Jointures</a>
                <nav class="nav nav-pills flex-column">
                    <a class="nav-link" href="#">1. Définition </a>
                    <a class="nav-link" href="#">2. Récapitulatif</a>
                    <a class="nav-link" href="#">3. Exemples</a>
                    <a class="nav-link" href="#">4. Jointures externes </a>
                    <a class="nav-link" href="#">5. Jointures externes avec UNION </a>
                </nav>

                <!-- nav pour la page 05_fonctions -->
                <a class="navbar-brand" href="#">Page 05 - Fonctions</a>
                <nav class="nav nav-pills flex-column">
                    <a class="nav-link" href="#">1. Quelques fonctions </a>
                </nav>

                <!-- nav pour la page 05_exos -->
                <a class="navbar-brand" href="#">Page 06 - EXO: BDD immobilier</a>
                <nav class="nav nav-pills flex-column">
                    <a class="nav-link" href="#">1. Modélisation de la BDD immobilier : créations des tables et insertion de contenu<br> </a>
                    <a class="nav-link" href="#">2. Exos / récap : multiples requêtes SQL<br> </a>
                </nav>
            </nav>
            <!-- Fin NAV pour la page index : sommaire -->
        </div>


        <!-- section container : zoning avec contenu principal-->


        <section class="container mb-4 bg-light col-9">

            <!-- debut row 1 -->
            <div class="row justify-content-center mt-4">
                <h2 id="" class="text-dark p-5">1. INSERT INTO, requête d'insertion</h2>
                <!-- .col-4*3>h2{$/ Titre} -->

                <div class="col-md-10">
                    <ul>

                        <li class="alert alert-success">En cas de bug dans le terminal, relancer la BDD : pour reinitier, faire <code>CRTL + C</code> + relancer la BDD avec <code>USE entreprise</code> + taper la requête</li><br>

                        <li>1ère méthode : <code>INSERT INTO employes (prenom, nom, sexe, service, date_embauche, salaire) VALUES ('Alexis', 'Richard', 'm', 'informatique', '2011-12-28', 1800);</code> Ici il faut mettre l'ordre des elements dans la table
                            et taper avant l'INTO <code>SELECT * FROM employes</code>! Et donnera ça : <code>SELECT * FROM employes INSERT INTO employes (prenom, nom, sexe, service, date_embauche, salaire) VALUES ('Alexis', 'Richard', 'm', 'informatique', '2011-12-28', 1800);</code></li><br>

                        <li>Afficher cet enregistrement, on le cherche par le nom de famille : <code>SELECT * FROM employes WHERE nom = 'Richard';</code>, ou bien on cherche le dernier enregsitrement <code>SELECT * FROM employes ORDER BY id_employes DESC LIMIT 1;</code></li><br>

                        <hr>

                        <li>2ème méthode : <code>INSERT INTO employes VALUES (NULL, 'Jeanne', 'Richy', 'f', 'informatique', '2012-01-21', 1800);</code></li> <br>

                        <li class="alert alert-success">NULL nous permet de laisser le champ id_employes se remplir seul car il est auto-incrementé.</li> <br>
                    </ul>
                </div>
                <!-- fin col -->
            </div>
            <!-- fin row 1 -->

            <div class="row justify-content-center mt-4">
                <h2 id="" class="text-dark p-5">2. UPDATE, requête de mise à jour</h2>

                <div class="col-md-10">
                    <ul>
                        <li>Augmenter le salaire de l'employée, Jeanne, dont l'id est 992 <code>UPDATE employes SET salaire = 1900 WHERE id_employes = 992;</code></li><br>

                        <code>
                      MariaDB [entreprise]> SELECT * FROM employes ORDER BY id_employes DESC LIMIT 1;
                      +-------------+--------+-------+------+--------------+---------------+---------+
                      | id_employes | prenom | nom   | sexe | service      | date_embauche | salaire |
                      +-------------+--------+-------+------+--------------+---------------+---------+
                      |         994 | Jeanne | Richy | f    | informatique | 2012-01-21    |    1800 |
                      +-------------+--------+-------+------+--------------+---------------+---------+</code>

                        <hr>

                        <li class="alert alert-success">On utilise toujours des ID pour mettre à jour les informations de la BDD car c'est le seul élément unique.</li><br>

                        <li>Pour faire plusieurs mises à jours au même temps il faudra respecter l'ordre des colonnes et les séparer par une virgule <code>UPDATE employes SET servicec = 'commercial', salaire = 2000 WHERE id_employes = 992;</code></li>
                    </ul>
                </div>
                <!-- fin col -->
            </div>
            <!-- fin row 1 -->

            <div class="row justify-content-center mt-4">
                <h2 id="" class="text-dark p-5">3. DELETE, requête de suppression</h2>

                <div class="col-md-10">
                    <ul>
                        <li>Supprimer un enregistrement avec DELETE : <br>
                            <code>
                            DELETE FROM employes WHERE id_employes = 388;

                            MariaDB [entreprise]> SELECT * FROM employes;
                            +-------------+-------------+----------+------+---------------+---------------+---------+
                            | id_employes | prenom      | nom      | sexe | service       | date_embauche | salaire |
                            +-------------+-------------+----------+------+---------------+---------------+---------+
                            |         350 | Jean-Pierre | Laborde  | m    | direction     | 1999-12-09    |    5000 |
                            |         415 | Thomas      | Winter   | m    | commercial    | 2000-05-03    |    3550 |
                            |         417 | Chloe       | Dubar    | f    | production    | 2001-09-05    |    1900 |
                            |         491 | Elodie      | Fellier  | f    | secretariat   | 2002-02-22    |    1600 |
                            |         509 | Fabrice     | Grand    | m    | comptabilite  | 2003-02-20    |    1900 |
                            |         547 | Melanie     | Collier  | f    | commercial    | 2004-09-08    |    3100 |
                            |         592 | Laura       | Blanchet | f    | direction     | 2005-06-09    |    4500 |
                            |         627 | Guillaume   | Miller   | m    | commercial    | 2006-07-02    |    1900 |
                            |         655 | Celine      | Perrin   | f    | commercial    | 2006-09-10    |    2700 |
                            |         699 | Julien      | Cottet   | m    | secretariat   | 2007-01-18    |    1390 |
                            |         701 | Mathieu     | Vignal   | m    | informatique  | 2008-12-03    |    2000 |
                            |         739 | Thierry     | Desprez  | m    | secretariat   | 2009-11-17    |    1500 |
                            |         780 | Amandine    | Thoyer   | f    | communication | 2010-01-23    |    1500 |
                            |         802 | Damien      | Durand   | m    | informatique  | 2010-07-05    |    2250 |
                            |         854 | Daniel      | Chevel   | m    | informatique  | 2011-09-28    |    1700 |
                            |         876 | Nathalie    | Martin   | f    | juridique     | 2012-01-12    |    3200 |
                            |         900 | Benoit      | Lagarde  | m    | production    | 2013-01-03    |    2550 |
                            |         933 | Emilie      | Sennard  | f    | commercial    | 2014-09-11    |    1800 |
                            |         990 | Stephanie   | Lafaye   | f    | assistant     | 2015-06-02    |    1775 |
                            |         991 | Alexis      | Richard  | m    | informatique  | 2011-12-28    |    1800 |
                            |         992 | Alexis      | Richard  | m    | informatique  | 2011-12-28    |    1800 |
                            |         993 | Alexis      | Richard  | m    | informatique  | 2011-12-28    |    1800 |
                            |         994 | Jeanne      | Richy    | f    | informatique  | 2012-01-21    |    1800 |
                            +-------------+-------------+----------+------+---------------+---------------+---------+
                        </code></li>


                        <li>Supprimer plusieurs enregistrements, ici on supprime toutes les personnes du service informatique : <br>
                            <code>DELETE FROM employes WHERE service = 'informatique';</code></li><br>

                        <code>
                            MariaDB [entreprise]> SELECT * FROM employes;
                            +-------------+-------------+----------+------+---------------+---------------+---------+
                            | id_employes | prenom      | nom      | sexe | service       | date_embauche | salaire |
                            +-------------+-------------+----------+------+---------------+---------------+---------+
                            |         350 | Jean-Pierre | Laborde  | m    | direction     | 1999-12-09    |    5000 |
                            |         415 | Thomas      | Winter   | m    | commercial    | 2000-05-03    |    3550 |
                            |         417 | Chloe       | Dubar    | f    | production    | 2001-09-05    |    1900 |
                            |         491 | Elodie      | Fellier  | f    | secretariat   | 2002-02-22    |    1600 |
                            |         509 | Fabrice     | Grand    | m    | comptabilite  | 2003-02-20    |    1900 |
                            |         547 | Melanie     | Collier  | f    | commercial    | 2004-09-08    |    3100 |
                            |         592 | Laura       | Blanchet | f    | direction     | 2005-06-09    |    4500 |
                            |         627 | Guillaume   | Miller   | m    | commercial    | 2006-07-02    |    1900 |
                            |         655 | Celine      | Perrin   | f    | commercial    | 2006-09-10    |    2700 |
                            |         699 | Julien      | Cottet   | m    | secretariat   | 2007-01-18    |    1390 |
                            |         739 | Thierry     | Desprez  | m    | secretariat   | 2009-11-17    |    1500 |
                            |         780 | Amandine    | Thoyer   | f    | communication | 2010-01-23    |    1500 |
                            |         876 | Nathalie    | Martin   | f    | juridique     | 2012-01-12    |    3200 |
                            |         900 | Benoit      | Lagarde  | m    | production    | 2013-01-03    |    2550 |
                            |         933 | Emilie      | Sennard  | f    | commercial    | 2014-09-11    |    1800 |
                            |         990 | Stephanie   | Lafaye   | f    | assistant     | 2015-06-02    |    1775 |
                            +-------------+-------------+----------+------+---------------+---------------+---------+</code>

                        <hr>
                    </ul>
                </div>
                <!-- fin col -->
            </div>
            <!-- fin row 1 -->

    </main>
    <!-- FIN MAIN -->

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>
</body>

</html>